<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Report Issue ¬∑ CityFix</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body class="light-body">

<header class="site-header">
  <div class="logo">üèô CityFix</div>
  <nav>
    <a href="index.html">Home</a>
    <a href="check-status.html">Check Status</a>
    <a href="admin-login.html">Admin</a>
  </nav>
</header>

<main class="form-wrap">
  <h2>Report a City Problem</h2>

  <label>Photo (required)</label>
  <input type="file" id="photoFile" accept="image/*" />

  <label>Location</label>
  <div style="display:flex;gap:8px;">
    <input id="locationInput" type="text" placeholder="Enter location or use GPS" />
    <button class="btn outline" onclick="captureLocation()">Use GPS</button>
  </div>

  <label>Issue Type</label>
  <select id="issueType">
    <option>Pothole</option>
    <option>Streetlight</option>
    <option>Garbage</option>
    <option>Water Leakage</option>
    <option>Road Damage</option>
    <option>Sanitation</option>
  </select>

  <label>Description</label>
  <textarea id="description" rows="4" placeholder="Describe the problem"></textarea>

  <div style="display:flex;gap:8px;margin-top:12px;">
    <button class="btn primary" onclick="submitIssue()">Submit Complaint</button>
    <button class="btn outline" onclick="logoutCitizen()">Logout</button>
  </div>

  <p id="submitMsg" class="muted" style="margin-top:12px;"></p>
</main>

<script src="app.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // guard: must be logged in as citizen
  if(!isCitizenLoggedIn()){
    alert('Please login (Citizen) first.');
    location.href='citizen-login.html';
  } else {
    // show email as placeholder in location line? optional
  }
});
</script>
</body>
</html>
